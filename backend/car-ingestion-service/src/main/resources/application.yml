server:
  port: ${SERVER_PORT:8088}

spring:
  application:
    name: car-ingestion-service

  data:
    mongodb:
      uri: ${SPRING_DATA_MONGODB_URI:mongodb://localhost:27017/cityflow}
      auto-index-creation: true

    redis:
      host: ${SPRING_DATA_REDIS_HOST:localhost}
      port: ${SPRING_DATA_REDIS_PORT:6379}

  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${OAUTH2_ISSUER_URI:http://localhost:8080/realms/cityflow}

  kafka:
    bootstrap-servers: ${SPRING_KAFKA_BOOTSTRAP_SERVERS:localhost:9093}
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
    properties:
      spring:
        json:
          add:
            type:
              headers: false

logging:
  level:
    root: info
    org.springframework: info
    com.cityflow: debug

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      probes:
        enabled: true

app:
  security:
    enabled: ${APP_SECURITY_ENABLED:true}
  kafka:
    enabled: ${APP_KAFKA_ENABLED:true}
    topics:
      car-location: car.location.events
      car-status: car.status.events
  simulator:
    enabled: ${APP_SIMULATOR_ENABLED:true}
    interval-ms: 3000  # Update every 3 seconds (faster than buses due to more cars)
    base-speed-kmh: 50  # Base speed in km/h
    max-speed-kmh: 80   # Maximum speed in km/h
    initial-car-count: ${APP_SIMULATOR_INITIAL_CAR_COUNT:50}  # Number of cars to simulate
    city-bounds:
      min-lat: ${APP_SIMULATOR_CITY_BOUNDS_MIN_LAT:42.62}  # Prishtina area
      max-lat: ${APP_SIMULATOR_CITY_BOUNDS_MAX_LAT:42.70}
      min-lon: ${APP_SIMULATOR_CITY_BOUNDS_MIN_LON:21.10}
      max-lon: ${APP_SIMULATOR_CITY_BOUNDS_MAX_LON:21.20}
    traffic-density-radius-km: 0.5  # Radius for calculating nearby traffic (500 meters)
  redis:
    ttl-seconds: 300   # Cache car positions for 5 minutes

